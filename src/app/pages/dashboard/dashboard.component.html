<div class="row">
  <div class="col-md-6">

    <div class="row">
      <div class="col-sm-12">
        <nb-card size="tiny">
          <nb-card-body>
            <h5>New Scan</h5>
            <label class="label">Select file location to scan a new project for complexity</label>
            <div class="form-group">
              <input nbInput fullWidth placeholder="Source Path" [(ngModel)]="sourcePathForNewScan">
            </div>
            <div class="form-group">
              <input nbInput placeholder="Project Key" [(ngModel)]="projectKeyForNewScan">
              <button nbButton hero status="success" size="small" class="float-right"
                      (click)="startNewScan()">Scan
              </button>
            </div>
          </nb-card-body>
        </nb-card>
      </div>

    </div>

    <div class="row">
      <div class="col-sm-12">
        <nb-card size="small">
          <nb-card-header>
            <h5>Projects</h5>
          </nb-card-header>
          <nb-list>
            <nb-list-item *ngFor="let project of allProjects">
              <button nbButton ghost size="small" status="success"
                      (click)="selectProject(project)" class="off-text-transform">
                {{project.projectKey}}
              </button>
            </nb-list-item>
          </nb-list>
        </nb-card>
      </div>
    </div>

  </div>
  <div class="col-md-6">
    <nb-card size="large">
      <nb-card-header>
        <h5>Files</h5>
      </nb-card-header>

      <nb-list *ngIf="selectedProject">
        <nb-list-item *ngFor="let file of selectedProject.files">
          <div class="row">
            <div class="col-sm-12">
              <button nbButton ghost status="success" size="small" class="off-text-transform"
                      (click)="openComplexityViewerForFile(file)">
                {{getFileNameFromPath(file.relativePath)}}</button>
            </div>
            <div class="col-sm-12">
              <label class="label label-padding">Relative path : {{file.relativePath}}</label>
            </div>
            <div class="col-sm-12">
              <div class="label-padding">
                <label class="label">View complexity due to</label><br>
                <button nbButton size="small" status="success" class="right-margin off-text-transform"
                        (click)="selectCsOnly();openComplexityViewerForFile(file)">Size</button>
                <button nbButton size="small" status="info" class="right-margin off-text-transform"
                        (click)="selectCvOnly();openComplexityViewerForFile(file)">Variables</button>
                <button nbButton size="small" status="warning" class="right-margin off-text-transform"
                        (click)="selectCmOnly();openComplexityViewerForFile(file)">Methods</button>
                <button nbButton size="small" status="danger" class="right-margin off-text-transform"
                        (click)="selectCiOnly();openComplexityViewerForFile(file)">Inheritance</button>
                <button nbButton size="small" status="primary" class="right-margin off-text-transform"
                        (click)="selectCcpOnly();openComplexityViewerForFile(file)">Coupling</button>
                <button nbButton size="small" status="info" class="right-margin off-text-transform"
                        (click)="selectCcsOnly();openComplexityViewerForFile(file)">Control Structure</button>
              </div>
            </div>
          </div>
        </nb-list-item>
      </nb-list>
    </nb-card>
  </div>
</div>

<ng-template #complexityViewer let-ref="dialogRef">
  <nb-card class="big-width" size="large">
    <nb-card-header>
      <div class="row">
        <div class="col-sm-12">
          Complexity viewer
          <button nbButton ghost size="small" status="danger" class="float-right" (click)="ref.close()">close</button>
          <button nbButton ghost size="small" status="success" class="float-right" (click)="seeFilters = !seeFilters">
            {{!seeFilters ? 'See' : 'Hide'}} Filters
          </button>
        </div>
      </div>
    </nb-card-header>
    <nb-card-header *ngIf="seeFilters">
      <div class="row">
        <div class="col-sm-12">
          <nb-checkbox [(value)]="filters.showCs" status="success">Cs : Complexity due to size</nb-checkbox>
          <nb-checkbox [(value)]="filters.showCv" status="info">Cv : Complexity due to variables</nb-checkbox>
          <nb-checkbox [(value)]="filters.showCm" status="warning">Cm : Complexity due to methods</nb-checkbox>
          <nb-checkbox [(value)]="filters.showCi" status="danger">Ci : Complexity due to inheritance</nb-checkbox>
          <nb-checkbox [(value)]="filters.showCcp" status="primary">Ccp : Complexity due to coupling</nb-checkbox>
          <nb-checkbox [(value)]="filters.showCcs" status="info">Ccs : Complexity due to control structure</nb-checkbox>
        </div>
      </div>
    </nb-card-header>
    <nb-card-body>
      <!--      <table style="width: 100%">-->
      <!--        <tr>-->
      <!--          <th>no</th>-->
      <!--          <th>Line</th>-->
      <!--          <th>Cs</th>-->
      <!--          <th>Ctc</th>-->
      <!--          <th>Cnc</th>-->
      <!--          <th>Ci</th>-->
      <!--          <th>Cps</th>-->
      <!--          <th>tw</th>-->
      <!--          <th>Cr</th>-->
      <!--        </tr>-->
      <!--        <tr *ngFor="let lineData of selectedFile.linesData">-->
      <!--          <td>{{lineData.lineNo}}</td>-->
      <!--          <td>{{lineData.data}}</td>-->
      <!--          <td>{{lineData.cs}}</td>-->
      <!--          <td>{{lineData.ctc}}</td>-->
      <!--          <td>{{lineData.cnc}}</td>-->
      <!--          <td>{{lineData.ci}}</td>-->
      <!--          <td>{{lineData.cps}}</td>-->
      <!--          <td>{{lineData.tw}}</td>-->
      <!--          <td>{{lineData.cr}}</td>-->
      <!--        </tr>-->
      <!--      </table>-->
      <table style="width: 100%">
        <tr>
          <th>no</th>
          <th>Line</th>
          <th *ngIf="filters.showCs">Cs</th>
          <th *ngIf="filters.showCv">Cv</th>
          <th *ngIf="filters.showCm">Cm</th>
          <th *ngIf="filters.showCi">Ci</th>
          <th *ngIf="filters.showCcp">Ccp</th>
          <th *ngIf="filters.showCcs">Ccs</th>
        </tr>
        <tr *ngFor="let lineData of selectedFile.linesData">
          <td><label class="label">{{lineData.lineNo}}</label></td>
          <td>{{lineData.data}}</td>
          <td *ngIf="filters.showCs" class="text-success">{{lineData.cs}}</td>
          <td *ngIf="filters.showCv" class="text-info">-</td>
          <td *ngIf="filters.showCm" class="text-warning">-</td>
          <td *ngIf="filters.showCi" class="text-danger">{{lineData.ci}}</td>
          <td *ngIf="filters.showCcp" class="text-primary">{{lineData.cnc}}</td>
          <td *ngIf="filters.showCcs" class="text-info">{{lineData.ctc}}</td>
        </tr>
      </table>
    </nb-card-body>
    <nb-card-footer></nb-card-footer>
  </nb-card>
</ng-template>

