<div class="row">
  <div class="col-md-6">

    <div class="row">
      <div class="col-sm-12">
        <nb-card size="tiny">
          <nb-card-body>
            <h5>New Scan</h5>
            <label class="label">Select file location to scan a new project for complexity</label>
            <div class="form-group">
              <input nbInput fullWidth placeholder="Source Path" [(ngModel)]="sourcePathForNewScan">
            </div>
            <div class="form-group">
              <input nbInput placeholder="Project Key" [(ngModel)]="projectKeyForNewScan">
              <button nbButton hero status="success" size="small" class="float-right"
                      (click)="startNewScan()">Scan</button>
            </div>
          </nb-card-body>
        </nb-card>
      </div>

    </div>

    <div class="row">
      <div class="col-sm-12">
        <nb-card size="small">
          <nb-card-header>
            <h5>Projects</h5>
          </nb-card-header>
          <nb-list>
            <nb-list-item *ngFor="let project of allProjects">
              <button nbButton ghost size="small" status="success"
                      (click)="selectProject(project)" class="off-text-transform">
              {{project.projectKey}}
              </button>
            </nb-list-item>
          </nb-list>
        </nb-card>
      </div>
    </div>

  </div>
  <div class="col-md-6">
    <nb-card size="large">
      <nb-card-header>
        <h5>Files</h5>
      </nb-card-header>

      <nb-list *ngIf="selectedProject">
        <nb-list-item *ngFor="let file of selectedProject.files">
          <div class="row">
            <div class="col-sm-12">
              <button nbButton ghost status="success" size="small" class="off-text-transform"
                      (click)="openComplexityViewerForFile(file)">
                {{getFileNameFromPath(file.relativePath)}}</button>
            </div>
            <div class="col-sm-12">
              <label class="label label-padding">Relative path : {{file.relativePath}}</label>
            </div>
            <div class="col-sm-12">
              <div class="label-padding">
                <button nbButton size="small" status="success" class="right-margin off-text-transform">Cs</button>
                <button nbButton size="small" status="info" class="right-margin off-text-transform">Ctc</button>
                <button nbButton size="small" status="warning" class="right-margin off-text-transform">Cnc</button>
                <button nbButton size="small" status="danger" class="right-margin off-text-transform">Ci</button>
                <button nbButton size="small" status="primary" class="right-margin off-text-transform">Cps</button>
              </div>
            </div>
          </div>
        </nb-list-item>
      </nb-list>
    </nb-card>
  </div>
</div>

<ng-template #complexityViewer let-ref="dialogRef">
  <nb-card class="big-width" size="large">
    <nb-card-header>Complexity viewer</nb-card-header>
    <nb-card-body>
      <table>
        <tr>
          <th>no</th>
          <th>Line</th>
          <th>Cs</th>
          <th>Ctc</th>
          <th>Cnc</th>
          <th>Ci</th>
          <th>Cps</th>
          <th>tw</th>
          <th>Cr</th>
        </tr>
        <tr *ngFor="let lineData of selectedFile.linesData">
          <td>{{lineData.lineNo}}</td>
          <td>{{lineData.data}}</td>
          <td>{{lineData.cs}}</td>
          <td>{{lineData.ctc}}</td>
          <td>{{lineData.cnc}}</td>
          <td>{{lineData.ci}}</td>
          <td>{{lineData.cps}}</td>
          <td>{{lineData.tw}}</td>
          <td>{{lineData.cr}}</td>
        </tr>
      </table>
    </nb-card-body>
    <nb-card-footer></nb-card-footer>
  </nb-card>
</ng-template>

